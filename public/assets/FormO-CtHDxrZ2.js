import{S as P,_ as R}from"./SelectVariantModal-B6x13Sxr.js";import{t as W}from"./throttle-DsgwO3Of.js";import{D as E}from"./Dialog-CzQNm_aH.js";import{C as B}from"./CheckBox-dkUSqyDh.js";import{T as N}from"./TextInput-P9YfowMa.js";import{S as H}from"./SelectInput-DuQEsGg2.js";import{A as O}from"./AdminLayout-CHhwMEXq.js";import{_ as Q}from"./AutoComplete-Ce_Yg9H3.js";import{L as J}from"./LoadingButton-O9oS0M_7.js";import{T as Y}from"./TextareaInput-NtO8hvSg.js";import{T as G}from"./FormSection-Stt1T2N5.js";import{T as K}from"./TrashedMessage-BNhFU7vd.js";import{T as X}from"./ActionMessage-CRMYzNyY.js";import{T as Z}from"./SecondaryButton-DuAF_qyf.js";import{_ as ee,r as h,d as V,o,e as g,g as m,a as p,b as s,c as i,F as f,t as l,h as b,n as v,i as k}from"./app-CI7qIbXC.js";import"./Modal-CiUoFiI1.js";import"./DialogModal-C6zwJaS_.js";import"./DangerButton-DnV_Vl5R.js";import"./Checkbox-BKFFv1Hc.js";import"./InputError-DdVaifAZ.js";import"./v4-C6aID195.js";import"./Label-D5N1lBqm.js";import"./Input-Cp6JK_sq.js";import"./DropdownLink-u7U2R0kC.js";import"./ApplicationLogo-B1xsSWkx.js";import"./ApplicationMark-BpTNqTDI.js";import"./SectionTitle-gSVZ5f0a.js";const te={props:["edit","contacts","warehouses"],components:{Dialog:E,CheckBox:B,TextInput:N,SelectInput:H,AdminLayout:O,AutoComplete:Q,LoadingButton:J,TextareaInput:Y,TecFormSection:G,TrashedMessage:K,TecActionMessage:X,SelectVariantModal:P,TecSecondaryButton:Z},data(){var e;return{files:[],item:null,confirm:!1,selected:!1,permanent:!1,restoreConf:!1,select_variant:!1,unknown_variation:null,wIW:window.innerWidth,form:this.$inertia.form({_method:this.edit?"PUT":"POST",items:[],attachments:null,type:this.edit?this.edit.type:"Damage",details:this.edit?this.edit.details:null,draft:this.edit?this.edit.draft==1:!1,reference:this.edit?this.edit.reference:null,date:this.edit?this.edit.date:this.$formatJSDate(new Date),warehouse_id:this.edit?this.edit.warehouse_id:this.$super?null:(e=this.$user)==null?void 0:e.warehouse_id})}},computed:{smallScreen(){return this.wIW<1024}},watch:{select_variant:function(e){this.unknown_variation=null,document.body.style.overflow=e?"hidden":"auto"}},created(){this.edit&&(this.form.items=this.edit.items.map(e=>({...e.item,id:e.id,details:"",item_id:e.item_id,unit_id:e.unit_id,weight:parseFloat(e.weight),quantity:parseFloat(e.quantity),old_quantity:parseFloat(e.quantity),selected:{serials:[],variations:e.variations.map(n=>({...n,weight:parseFloat(n.pivot.weight),unit_id:n.pivot.unit_id||e.unit_id,quantity:parseFloat(n.pivot.quantity),old_quantity:parseFloat(n.pivot.quantity)}))}})))},mounted(){!this.edit&&!this.$super&&(this.form.warehouse_id=this.$user.warehouse_id),window.addEventListener("resize",this.onResize)},unmounted(){window.removeEventListener("resize",this.onResize)},methods:{onResize:W(function(){this.wIW=window.innerWidth},250),removeItem(e,r,n){n?(e.selected.variations.splice(n,1),e.selected.variations.length<1&&(e.selected.variations=[],this.form.items.splice(r,1))):this.form.items.splice(r,1)},variantSelected(e){let r=null;if(typeof e=="object"&&e!==null?r=this.item.variations.find(n=>R(n.meta,e)):r=this.item.variations.find(n=>n.sku==e),r){this.item.selected||(this.item.selected={variations:[],serials:[]}),r.quantity=1,r.unit_id=this.item.unit_id,r.weight=this.$settings.track_weight==1&&this.item.track_weight==1?1:0;let n=this.form.items.find($=>$.item_id==this.item.id);if(n){n.quantity+=1,n.weight+=this.$settings.track_weight==1&&n.track_weight==1?1:0;let $=n.selected.variations.length?n.selected.variations.find(u=>u.id==r.id):null;$?($.quantity+=1,$.weight+=this.$settings.track_weight==1&&n.track_weight==1?1:0):n.selected.variations.push(r)}else this.item.selected.variations=[{...r}],this.form.items.push({...this.item,quantity:1,unit_id:this.item.unit_id,weight:this.$settings.track_weight==1&&this.item.track_weight==1?1:0});this.item=null,this.select_variant=!1}else this.unknown_variation=this.$t("No match found for the item variation."),this.$page.props.flash.error=this.unknown_variation},itemSelected(e){if(e.item_id=e.id,e.selected=e.selected||{variations:[],serials:[]},e.has_variants&&e.variants.length>0)this.item={...e,variants:e.variants.map(r=>({...r,selected:null}))},this.select_variant=!0;else{let r=this.form.items.find(n=>n.id==e.id);r?(r.quantity+=1,r.weight+=this.$settings.track_weight==1&&r.track_weight==1?1:0):this.form.items.push({...e,quantity:1,unit_id:e.unit_id,weight:e.track_weight==1?1:0})}},updateFile(e){Array.from(e.target.files).forEach(r=>this.files.push(r.name))},submit(){this.$refs.file&&(this.form.attachments=this.$refs.file.files),this.form.transform(e=>({...e,items:e.items.map(r=>({...r,unit:null,variants:null,variations:null,unit_id:r.unit_id||null,selected:{serials:r.selected.serials&&r.selected.serials.length?r.selected.serials.map(n=>n.id):[],variations:r.selected.variations.map(n=>{let $={};return $[n.id]={weight:n.weight,variation_id:n.id,quantity:n.quantity,unit_id:n.unit_id||null,old_quantity:n.old_quantity}})}}))})).post(this.edit?route("adjustments.update",this.edit.id):route("adjustments.store"),{preserveScroll:!0,preserveState:!1})},destroy(){this.confirm=!0},deleteItem(){this.form.delete(route("adjustments.destroy",this.edit.id),{onSuccess:()=>this.closeModal()})},closeModal(){this.confirm=!1},restore(){this.restoreConf=!0},restoreItem(){this.$inertia.put(this.route("adjustments.restore",this.edit.id),{onSuccess:()=>this.restoreConf=!1})},closeRestoreModal(){this.restoreConf=!1},deletePermanently(){this.permanent=!0},deleteCategoryPermanently(){this.form.delete(route("adjustments.destroy.permanently",this.edit.id),{onSuccess:()=>this.closeModal()})},closePermanentModal(){this.permanent=!1},deleteAttachment(e){this.$inertia.form({_method:"DELETE"}).delete(route("media.delete",e))}}},se={key:0,class:"flex items-center"},oe={class:"flex flex-col gap-6"},re={class:"flex flex-col lg:flex-row gap-6"},ie={class:"flex flex-col gap-6 w-full lg:w-1/2"},le={class:"flex flex-col gap-6 w-full lg:w-1/2"},ne={class:"p-4 md:px-6 bg-gray-50 -mx-4 md:-mx-6"},ae={key:0,class:"pt-4"},de={key:0,class:"text-red-600"},ue={key:1},pe=["innerHTML"],me={class:"w-full block sm:flex items-center justify-stretch gap-4"},ce={class:"mt-4 grow flex items-center gap-4"},he={class:"w-1/2"},ge=["value"],fe=["value"],ye={key:1,class:"w-full block sm:flex items-center justify-stretch gap-4"},_e={class:"mt-4 grow flex items-center gap-4"},we={class:"w-1/2"},be=["value"],ve=["value"],ke={class:"mt-4"},$e={key:0,class:"text-red-600 pt-1 rounded-md"},Ve={key:1,class:"text-red-600 pt-1 rounded-md"},xe={key:2,class:"text-red-600 pt-1 rounded-md"},qe={key:1,class:"bg-white mt-4 rounded-md shadow-sm overflow-x-auto"},Ue={class:"w-full"},Se={class:"text-left font-bold"},je={class:"px-2 lg:pl-6 py-4 w-4"},Ae={class:"px-2 lg:px-6 py-4"},Te={key:0},Ce={class:"px-2 lg:px-6 py-4 text-center w-32 xl:w-56"},De={class:"px-2 lg:px-6 py-4 text-center w-32 xl:w-56"},Me={key:0,class:"group"},ze={class:"border-t",colspan:"4"},Fe={class:"px-2 lg:px-6 py-2 focus:text-indigo-500"},Ie={class:"w-full lg:w-auto font-bold"},Le={class:"text-base"},Pe={class:"px-2 lg:pl-6 pb-2 focus:text-indigo-500"},Re=["onClick"],We={class:"px-2 lg:px-6 pb-2 focus:text-indigo-500"},Ee=["innerHTML"],Be={key:0,class:"px-2 xl:px-6 pb-2 text-right"},Ne={class:"px-2 xl:px-6 pb-2 text-right"},He={key:0,class:"px-2 xl:px-6 pb-2 text-right"},Oe=["value"],Qe=["value"],Je={colspan:"3"},Ye={class:"px-2 lg:px-6 pb-2 focus:text-indigo-500"},Ge={key:0,class:"text-red-600 pt-1 rounded-md"},Ke={key:1,class:"text-red-600 pt-1 rounded-md"},Xe={key:2,class:"text-red-600 pt-1 rounded-md"},Ze={class:"border-t"},et={class:"px-2 lg:pl-6 py-2 focus:text-indigo-500"},tt=["onClick"],st={class:"border-t"},ot={class:"px-2 lg:px-6 py-2 focus:text-indigo-500"},rt={class:"w-full lg:w-auto"},it={class:"text-base"},lt={key:0,class:"text-red-600 pt-1 rounded-md"},nt={key:1,class:"text-red-600 pt-1 rounded-md"},at={key:2,class:"text-red-600 pt-1 rounded-md"},dt={class:"border-t"},ut={key:0,class:"px-2 xl:px-6 py-2 text-right"},pt={class:"border-t"},mt={class:"px-2 xl:px-6 py-2 text-right"},ct={class:"border-t"},ht={key:0,class:"px-2 xl:px-6 py-2 text-right"},gt=["value"],ft=["value"],yt={key:1},_t={key:0,class:"text-red-600"},wt={for:"file-upload",class:"font-medium text-gray-700"},bt={key:0,class:"print:hidden py-4 w-full"},vt={role:"list",class:"border border-gray-200 rounded-md divide-y divide-gray-200"},kt={class:"w-0 flex-1 flex items-center"},$t={class:"ml-2 flex-1 w-0 truncate"},Vt={class:"ml-4 shrink-0 flex items-center gap-4"},xt=["href"],qt=["onClick"],Ut={class:"space-y-1 text-center"},St={class:"flex items-center justify-center text-gray-600"},jt={for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-hidden focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-gray-300"},At={key:0,class:"font-semibold"},Tt={key:1,class:"font-semibold"},Ct={class:"pl-1"},Dt={class:"text-sm text-gray-700"},Mt={key:0,class:"inline-block pt-4"},zt={class:"px-3 py-1 rounded-md border font-bold text-base"},Ft={key:1,class:"mt-4 pt-2 text-red-600 rounded-md"},It={class:"w-full flex items-center justify-between"},Lt={key:1},Pt={class:"flex items-center"};function Rt(e,r,n,$,u,c){const A=h("Link"),T=h("trashed-message"),y=h("text-input"),S=h("auto-complete"),q=h("select-input"),U=h("icons"),C=h("textarea-input"),D=h("check-box"),M=h("tec-action-message"),z=h("loading-button"),F=h("tec-form-section"),I=h("select-variant-modal"),j=h("Dialog"),L=h("admin-layout");return o(),V(L,{title:e.$t(n.edit?"edit_x":"create_x",{x:e.$t("Adjustment")})},{default:g(()=>[m(F,{onSubmitted:c.submit},{title:g(()=>[n.edit?(o(),i("div",se,[m(A,{class:"text-blue-600 hover:text-blue-700",href:e.route("adjustments.index")},{default:g(()=>[b(l(e.$t("Adjustments")),1)]),_:1},8,["href"]),r[10]||(r[10]=s("span",{class:"text-blue-600 font-medium mx-2"},"/",-1)),b(" "+l(e.$t("Adjustment"))+" ("+l(n.edit.reference)+") ",1)])):(o(),i(f,{key:1},[b(l(e.$t("create_x",{x:e.$t("Adjustment")})),1)],64))]),description:g(()=>[b(l(n.edit?e.$t("Update the record by modifying the details in the form below"):e.$t("Please fill the form below to add new record.")),1)]),form:g(()=>{var x;return[n.edit&&n.edit.deleted_at?(o(),V(T,{key:0,class:"mb-6",onRestore:c.restore},{default:g(()=>[b(l(e.$t("This record has been deleted.")),1)]),_:1},8,["onRestore"])):p("",!0),s("div",oe,[s("div",re,[s("div",ie,[m(y,{type:"date",modelValue:u.form.date,"onUpdate:modelValue":r[0]||(r[0]=t=>u.form.date=t),error:e.$page.props.errors.date,label:e.$t("Date")},null,8,["modelValue","error","label"]),m(y,{modelValue:u.form.reference,"onUpdate:modelValue":r[1]||(r[1]=t=>u.form.reference=t),error:e.$page.props.errors.reference,label:e.$t("Reference")},null,8,["modelValue","error","label"])]),s("div",le,[m(S,{id:"type",label:e.$t("Type"),modelValue:u.form.type,"onUpdate:modelValue":r[2]||(r[2]=t=>u.form.type=t),error:e.$page.props.errors.type,suggestions:[{value:"Damage",label:e.$t("Damage")},{value:"Addition",label:e.$t("Addition")},{value:"Subtraction",label:e.$t("Subtraction")}]},null,8,["label","modelValue","error","suggestions"]),!e.$super&&e.$user.warehouse_id?(o(),V(y,{key:0,disabled:"",readonly:"",label:e.$t("Warehouse"),modelValue:(x=n.warehouses.find(t=>t.id==e.$user.warehouse_id))==null?void 0:x.name},null,8,["label","modelValue"])):(o(),V(S,{key:1,id:"warehouse",label:e.$t("Warehouse"),suggestions:n.warehouses,modelValue:u.form.warehouse_id,"onUpdate:modelValue":r[3]||(r[3]=t=>u.form.warehouse_id=t),error:e.$page.props.errors.warehouse_id},null,8,["label","suggestions","modelValue","error"]))])]),s("div",ne,[m(S,{"keep-focus":"","reset-search":"",json:!1,id:"add-item","onUpdate:modelValue":c.itemSelected,suggestions:e.route("items.search"),placeholder:e.$t("Scan barcode or search items"),defaultText:e.$t("Scan barcode or search items for next")},null,8,["onUpdate:modelValue","suggestions","placeholder","defaultText"]),c.smallScreen?(o(),i("div",ae,[u.form.items.length===0?(o(),i("div",{key:0,class:v({"-mx-4 md:-mx-6 -mb-4 p-4 bg-red-100 border-red-600":e.$page.props.errors.items})},[b(l(e.$t("Add item to the list by search or scan barcode"))+" ",1),e.$page.props.errors.items?(o(),i("div",de,l(e.$page.props.errors.items),1)):p("",!0)],2)):(o(),i("div",ue,[(o(!0),i(f,null,k(u.form.items,(t,a)=>(o(),i("div",{key:t.id,class:v(["-mx-4 -mb-6 p-4 md:-mx-6 border-b border-blue-100",{"bg-blue-50":a%2==0,"bg-indigo-50":a%2!=0,error:e.$page.props.errors["items."+a+".variation_id"]||e.$page.props.errors["items."+a+".quantity"]||e.$page.props.errors["items."+a+".weight"]}])},[s("h4",{class:v(["text-base font-bold",{"-mb-4":t.has_variants}])},l(t.name)+" ("+l(t.code)+")",3),t.has_variants&&t.variants.length&&t.selected.variations?(o(!0),i(f,{key:0},k(t.selected.variations,d=>(o(),i("div",{key:d.sku},[s("span",{class:"mt-8 block",innerHTML:e.$meta(d.meta)},null,8,pe),s("div",me,[s("div",ce,[m(y,{label:e.$t("Quantity"),type:"number",modelValue:d.quantity,"onUpdate:modelValue":_=>d.quantity=_,class:"w-1/2"},null,8,["label","modelValue","onUpdate:modelValue"]),s("div",he,[m(q,{label:e.$t("Unit"),modelValue:d.unit_id,"onUpdate:modelValue":_=>d.unit_id=_,class:"w-full"},{default:g(()=>[s("option",{value:t.unit.id},l(t.unit.name),9,ge),t.unit.subunits&&t.unit.subunits.length?(o(!0),i(f,{key:0},k(t.unit.subunits,_=>(o(),i("option",{key:_.id,value:_.id},l(_.name),9,fe))),128)):p("",!0)]),_:2},1032,["label","modelValue","onUpdate:modelValue"])])]),e.$settings.track_weight==1&&t.track_weight==1?(o(),V(y,{key:0,type:"number",modelValue:d.weight,"onUpdate:modelValue":_=>d.weight=_,label:e.$t("Weight"),class:"mt-4 w-full sm:w-1/3"},null,8,["modelValue","onUpdate:modelValue","label"])):p("",!0)])]))),128)):(o(),i("div",ye,[s("div",_e,[m(y,{label:e.$t("Quantity"),type:"number",modelValue:t.quantity,"onUpdate:modelValue":d=>t.quantity=d,class:"w-1/2"},null,8,["label","modelValue","onUpdate:modelValue"]),s("div",we,[m(q,{label:e.$t("Unit"),modelValue:t.unit_id,"onUpdate:modelValue":d=>t.unit_id=d,class:"w-full"},{default:g(()=>[s("option",{value:t.unit.id},l(t.unit.name),9,be),t.unit.subunits&&t.unit.subunits.length?(o(!0),i(f,{key:0},k(t.unit.subunits,d=>(o(),i("option",{key:d.id,value:d.id},l(d.name),9,ve))),128)):p("",!0)]),_:2},1032,["label","modelValue","onUpdate:modelValue"])])]),e.$settings.track_weight==1&&t.track_weight==1?(o(),V(y,{key:0,type:"number",label:e.$t("Weight"),modelValue:t.weight,"onUpdate:modelValue":d=>t.weight=d,class:"mt-4 w-full sm:w-1/3"},null,8,["label","modelValue","onUpdate:modelValue"])):p("",!0)])),s("div",ke,[e.$page.props.errors["items."+a+".variation_id"]?(o(),i("div",$e,l(e.$page.props.errors["items."+a+".variation_id"].split("when").shift())+". ",1)):p("",!0),e.$page.props.errors["items."+a+".quantity"]?(o(),i("div",Ve,l(e.$page.props.errors["items."+a+".quantity"]),1)):p("",!0),e.$page.props.errors["items."+a+".weight"]?(o(),i("div",xe,l(e.$page.props.errors["items."+a+".weight"].split("when").shift())+". ",1)):p("",!0)])],2))),128))]))])):(o(),i("div",qe,[s("table",Ue,[s("thead",null,[s("tr",Se,[s("th",je,[m(U,{name:"trash"})]),s("th",Ae,l(e.$t("Item")),1),s("th",{class:v(["px-2 lg:px-6 py-4 text-center",e.$settings.track_weight?"w-32 xl:w-56":"w-px"])},[e.$settings.track_weight?(o(),i("span",Te,l(e.$t("Weight")),1)):p("",!0)],2),s("th",Ce,l(e.$t("Quantity")),1),s("th",De,l(e.$t("Unit")),1)])]),s("tbody",null,[u.form.items.length?(o(!0),i(f,{key:0},k(u.form.items,(t,a)=>(o(),i(f,{key:t.id},[t.selected&&t.selected.variations&&t.selected.variations.length?(o(),i("tbody",Me,[s("tr",{class:v(["group-hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+a+".variation_id"]||e.$page.props.errors["items."+a+".quantity"]||e.$page.props.errors["items."+a+".weight"]}])},[r[11]||(r[11]=s("td",{class:"border-t"},[s("div",{class:"px-2 lg:pl-6 pb-2 focus:text-indigo-500"})],-1)),s("td",ze,[s("div",Fe,[s("h4",Ie,[s("span",Le,l(t.name)+" ("+l(t.code)+")",1)])])])],2),(o(!0),i(f,null,k(t.selected.variations,(d,_)=>(o(),i("tr",{key:d.id,class:v(["group-hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+a+".variation_id"]||e.$page.props.errors["items."+a+".quantity"]||e.$page.props.errors["items."+a+".weight"]}])},[s("td",null,[s("div",Pe,[s("button",{type:"button",onClick:w=>c.removeItem(t,a,_),class:"text-red-400 hover:text-red-600 w-5 h-5 flex items-center justify-center"},[m(U,{name:"trash"})],8,Re)])]),s("td",null,[s("div",We,[s("div",{innerHTML:e.$meta(d.meta)},null,8,Ee)])]),s("td",null,[e.$settings.track_weight==1&&t.track_weight==1?(o(),i("div",Be,[m(y,{type:"number",modelValue:d.weight,"onUpdate:modelValue":w=>d.weight=w,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0)]),s("td",null,[s("div",Ne,[m(y,{type:"number",modelValue:d.quantity,"onUpdate:modelValue":w=>d.quantity=w,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])]),s("td",null,[t.unit?(o(),i("div",He,[m(q,{modelValue:d.unit_id,"onUpdate:modelValue":w=>d.unit_id=w,size:"small",class:"w-full block"},{default:g(()=>[s("option",{value:t.unit.id},l(t.unit.name),9,Oe),t.unit.subunits&&t.unit.subunits.length?(o(!0),i(f,{key:0},k(t.unit.subunits,w=>(o(),i("option",{key:w.id,value:w.id},l(w.name),9,Qe))),128)):p("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])])):p("",!0)])],2))),128)),e.$page.props.errors["items."+a+".variation_id"]||e.$page.props.errors["items."+a+".quantity"]||e.$page.props.errors["items."+a+".weight"]?(o(),i("tr",{key:0,class:v(["group-hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+a+".variation_id"]||e.$page.props.errors["items."+a+".quantity"]||e.$page.props.errors["items."+a+".weight"]}])},[r[12]||(r[12]=s("td",null,[s("div",{class:"px-2 lg:pl-6 pb-2 focus:text-indigo-500"})],-1)),s("td",Je,[s("div",Ye,[e.$page.props.errors["items."+a+".variation_id"]?(o(),i("div",Ge,l(e.$page.props.errors["items."+a+".variation_id"].split("when").shift())+". ",1)):p("",!0),e.$page.props.errors["items."+a+".quantity"]?(o(),i("div",Ke,l(e.$page.props.errors["items."+a+".quantity"]),1)):p("",!0),e.$page.props.errors["items."+a+".weight"]?(o(),i("div",Xe,l(e.$page.props.errors["items."+a+".weight"].split("when").shift())+". ",1)):p("",!0)])])],2)):p("",!0)])):(o(),i("tr",{key:1,class:v(["hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+a+".variation_id"]||e.$page.props.errors["items."+a+".quantity"]||e.$page.props.errors["items."+a+".weight"]}])},[s("td",Ze,[s("div",et,[s("button",{type:"button",onClick:d=>c.removeItem(t,a),class:"text-red-400 hover:text-red-600 w-5 h-5 flex items-center justify-center"},[m(U,{name:"trash"})],8,tt)])]),s("td",st,[s("div",ot,[s("h4",rt,[s("span",it,l(t.name)+" ("+l(t.code)+")",1)]),e.$page.props.errors["items."+a+".variation_id"]?(o(),i("div",lt,l(e.$page.props.errors["items."+a+".variation_id"].split("when").shift())+". ",1)):p("",!0),e.$page.props.errors["items."+a+".quantity"]?(o(),i("div",nt,l(e.$page.props.errors["items."+a+".quantity"]),1)):p("",!0),e.$page.props.errors["items."+a+".weight"]?(o(),i("div",at,l(e.$page.props.errors["items."+a+".weight"].split("when").shift())+". ",1)):p("",!0)])]),s("td",dt,[e.$settings.track_weight==1&&t.track_weight==1?(o(),i("div",ut,[m(y,{type:"number",modelValue:t.weight,"onUpdate:modelValue":d=>t.weight=d,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0)]),s("td",pt,[s("div",mt,[m(y,{type:"number",modelValue:t.quantity,"onUpdate:modelValue":d=>t.quantity=d,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])]),s("td",ct,[t.unit?(o(),i("div",ht,[m(q,{modelValue:t.unit_id,"onUpdate:modelValue":d=>t.unit_id=d,size:"small",class:"w-full block"},{default:g(()=>[s("option",{value:t.unit.id},l(t.unit.name),9,gt),t.unit.subunits&&t.unit.subunits.length?(o(!0),i(f,{key:0},k(t.unit.subunits,d=>(o(),i("option",{key:d.id,value:d.id},l(d.name),9,ft))),128)):p("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])])):p("",!0)])],2))],64))),128)):p("",!0),u.form.items.length===0?(o(),i("tr",yt,[s("td",{class:v(["border-t px-2 lg:px-6 py-4",{"bg-red-100 border-red-600":e.$page.props.errors.items}]),colspan:"5"},[b(l(e.$t("Add item to the list by search or scan barcode"))+" ",1),e.$page.props.errors.items?(o(),i("div",_t,l(e.$page.props.errors.items),1)):p("",!0)],2)])):p("",!0)])])]))]),s("div",null,[s("label",wt,l(e.$t("Attachments")),1),n.edit&&n.edit.attachments&&n.edit.attachments.length?(o(),i("div",bt,[s("ul",vt,[(o(!0),i(f,null,k(n.edit.attachments,t=>(o(),i("li",{key:t.id,class:"pl-3 pr-4 py-3 flex items-center justify-between text-sm"},[s("div",kt,[m(U,{name:"clip",class:"shrink-0 h-5 w-5 text-gray-400"}),s("span",$t,l(t.title),1)]),s("div",Vt,[s("a",{class:"font-medium text-indigo-600 hover:text-indigo-500",href:e.route("media.download",t.id)},l(e.$t("Download")),9,xt),s("button",{class:"font-medium text-red-600 hover:text-red-500",onClick:a=>c.deleteAttachment(t.id)},l(e.$t("Delete")),9,qt)])]))),128))])])):p("",!0),s("div",{class:v([e.$page.props.errors.excel?"border-red-500":"border-gray-300","mt-1 flex justify-center px-6 py-3 border-2 border-dashed rounded-md"])},[s("div",Ut,[s("div",St,[s("label",jt,[u.files.length?(o(),i("span",At,l(e.$t("Add more files")),1)):(o(),i("span",Tt,l(e.$t("Select files")),1)),s("input",{multiple:"",ref:"file",type:"file",class:"sr-only",id:"file-upload",name:"file-upload",onChange:r[4]||(r[4]=(...t)=>c.updateFile&&c.updateFile(...t)),accept:".png,.jpg,.jpeg,.pdf,.doc,.docx,.xls,.xlsx,.zip"},null,544)]),s("p",Ct,l(e.$t("or drag and drop")),1)]),s("div",Dt,[s("div",null,l(e.$t("You can select .png, .jpg, .pdf, .docx, .xlsx & .zip files.")),1)]),u.files.length?(o(),i("div",Mt,[s("div",zt,[b(l(e.$t("Selected Files"))+": ",1),(o(!0),i(f,null,k(u.files,(t,a)=>(o(),i("div",{class:"text-left",key:a},l(a+1)+". "+l(t),1))),128))])])):p("",!0),e.$page.props.errors.excel?(o(),i("div",Ft,l(e.$page.props.errors.files),1)):p("",!0)])],2)]),m(C,{modelValue:u.form.details,"onUpdate:modelValue":r[5]||(r[5]=t=>u.form.details=t),error:e.$page.props.errors.details,label:e.$t("Details")},null,8,["modelValue","error","label"]),s("div",null,[!n.edit||n.edit.draft==1?(o(),V(D,{key:0,id:"draft",class:"mb-2",checked:u.form.draft,"onUpdate:checked":r[6]||(r[6]=t=>u.form.draft=t),error:e.$page.props.errors.draft,label:e.$t("This record is draft")},null,8,["checked","error","label"])):p("",!0)])])]}),actions:g(()=>[s("div",It,[n.edit?(o(),i(f,{key:0},[n.edit.deleted_at?(o(),i("button",{key:1,type:"button",onClick:r[8]||(r[8]=(...x)=>c.deletePermanently&&c.deletePermanently(...x)),class:"text-red-600 px-4 py-2 rounded-sm border-2 border-transparent hover:border-gray-300 focus:outline-hidden focus:border-gray-300"},l(e.$t("delete_x",{x:e.$t("Permanently")})),1)):(o(),i("button",{key:0,type:"button",onClick:r[7]||(r[7]=(...x)=>c.destroy&&c.destroy(...x)),class:"text-red-600 px-4 py-2 rounded-sm border-2 border-transparent hover:border-gray-300 focus:outline-hidden focus:border-gray-300"},l(e.$t("delete_x",{x:e.$t("Adjustment")})),1))],64)):(o(),i("div",Lt)),s("div",Pt,[m(M,{on:u.form.recentlySuccessful,class:"mx-3"},{default:g(()=>[b(l(e.$t("Saved.")),1)]),_:1},8,["on"]),m(z,{type:"submit",loading:u.form.processing,disabled:u.form.processing},{default:g(()=>[b(l(e.$t("Save")),1)]),_:1},8,["loading","disabled"])])])]),_:1},8,["onSubmitted"]),u.select_variant?(o(),V(I,{key:0,show:u.select_variant,nf:u.unknown_variation,variants:u.item.variants,onSelected:c.variantSelected,onClose:r[9]||(r[9]=x=>u.select_variant=!1)},null,8,["show","nf","variants","onSelected"])):p("",!0),m(j,{"max-width":"md",show:u.permanent,"action-type":"delete",title:"Delete Adjustment?",close:c.closePermanentModal,"action-text":"Delete Permanently",action:c.deleteCategoryPermanently,content:`<p class='mb-2'>${e.$t("Are you sure you want to delete the record permanently?")}</p>
        <p>${e.$t("Once deleted, all of its resources and data will be permanently deleted.")}</p>`},null,8,["show","close","action","content"]),m(j,{show:u.confirm,close:c.closeModal,action:c.deleteItem,"action-type":"delete",title:"Delete Adjustment?","action-text":"Delete Adjustment",content:e.$t("Are you sure you want to delete the record?")},null,8,["show","close","action","content"]),m(j,{show:u.restoreConf,action:c.restoreItem,title:"Restore Adjustment!",close:c.closeRestoreModal,"action-text":"Restore Adjustment",content:e.$t("Are you sure you want to restore the record?")},null,8,["show","action","close","content"])]),_:1},8,["title"])}const hs=ee(te,[["render",Rt]]);export{hs as default};
