import{D as B}from"./Dialog-CzQNm_aH.js";import{C as L}from"./CheckBox-dkUSqyDh.js";import{F as R}from"./FileInput-Bug-0NyO.js";import{T as j}from"./TextInput-P9YfowMa.js";import{S as F}from"./SelectInput-DuQEsGg2.js";import{A as O}from"./AdminLayout-CHhwMEXq.js";import{_ as W}from"./AutoComplete-Ce_Yg9H3.js";import{L as z}from"./LoadingButton-O9oS0M_7.js";import{T as K}from"./TextareaInput-NtO8hvSg.js";import{T as Q}from"./DialogModal-C6zwJaS_.js";import{T as G}from"./TrashedMessage-BNhFU7vd.js";import{T as H}from"./FormSection-Stt1T2N5.js";import{T as J}from"./DangerButton-DnV_Vl5R.js";import{T as X}from"./SectionTitle-gSVZ5f0a.js";import{T as Y}from"./ActionMessage-CRMYzNyY.js";import{T as Z}from"./SecondaryButton-DuAF_qyf.js";import{_ as $,r as m,d as V,o as i,e as c,g as l,b as s,c as d,F as _,t as u,h as g,a as b,T,i as C}from"./app-CI7qIbXC.js";import"./Checkbox-BKFFv1Hc.js";import"./InputError-DdVaifAZ.js";import"./v4-C6aID195.js";import"./Label-D5N1lBqm.js";import"./Input-Cp6JK_sq.js";import"./Modal-CiUoFiI1.js";import"./DropdownLink-u7U2R0kC.js";import"./ApplicationLogo-B1xsSWkx.js";import"./ApplicationMark-BpTNqTDI.js";const ee={props:["edit","categories","units","warehouses"],components:{Dialog:B,CheckBox:L,FileInput:R,TextInput:j,AdminLayout:O,SelectInput:F,AutoComplete:W,LoadingButton:z,TextareaInput:K,TecDialogModal:Q,TecFormSection:H,TecDangerButton:J,TrashedMessage:G,TecSectionTitle:X,TecActionMessage:Y,TecSecondaryButton:Z},data(){var e,t;return{photo:!1,confirm:!1,permanent:!1,restoreConf:!1,symbologies:[{value:"CODE128",label:this.$t("CODE128")},{value:"CODE39",label:this.$t("CODE39")},{value:"EAN5",label:this.$t("EAN-5")},{value:"EAN8",label:this.$t("EAN-8")},{value:"EAN13",label:this.$t("EAN-13")},{value:"UPC",label:this.$t("UPC-A")}],form:this.$inertia.form({photo:null,_method:this.edit?"put":"post",sku:this.edit?this.edit.sku:null,name:this.edit?this.edit.name:null,code:this.edit?this.edit.code:null,stock:this.edit?this.edit.stock:null,details:this.edit?this.edit.details:null,unit_id:this.edit?this.edit.unit_id:null,set_stock:this.edit?this.edit.set_stock:null,symbology:this.edit?this.edit.symbology:"code128",rack_location:this.edit?this.edit.rack_location:null,has_serials:this.edit?this.edit.has_serials==1:null,category_id:this.edit?(e=this.edit.categories[0])==null?void 0:e.id:null,has_variants:this.edit?this.edit.has_variants==1:null,track_weight:this.edit?this.edit.track_weight==1:null,track_quantity:this.edit?this.edit.track_quantity==1:!0,child_category_id:this.edit?(t=this.edit.categories[1])==null?void 0:t.id:null,alert_quantity:this.edit&&this.edit.alert_quantity?Number(this.edit.alert_quantity):null,variants:this.edit&&this.edit.variants?this.edit.variants:[{name:"",option:["",""]}],warehouses:this.warehouses.map(n=>({rack:"",warehouse_id:n.id,name:n.name}))||[]})}},created(){this.edit&&(this.form.warehouses=this.edit.stock.map(e=>{var t;return{rack:e.rack_location,warehouse_id:e.warehouse_id,name:(t=e.warehouse)==null?void 0:t.name}})),this.warehouses.map(e=>{this.form.warehouses.find(t=>t.warehouse_id==e.id)||this.form.warehouses.push({rack:"",warehouse_id:e.id,name:e.name})})},computed:{parents(){return this.categories.filter(e=>!e.parent_id)},subcategories(){return this.categories.filter(e=>e.parent_id==this.form.category_id)}},methods:{update(e){this.form.post(this.edit?this.route("items.update",this.edit.id):this.route("items.store"),{preserveScroll:!0})},destroy(){this.confirm=!0},deleteItem(){this.$inertia.delete(route("items.destroy",this.edit.id),{onSuccess:()=>this.closeModal()})},closeModal(){this.confirm=!1},restore(){this.restoreConf=!0},restoreItem(){this.$inertia.put(this.route("items.restore",this.edit.id),{onSuccess:()=>this.restoreConf=!1})},closeRestoreModal(){this.restoreConf=!1},deletePermanently(){this.permanent=!0},deleteCategoryPermanently(){this.$inertia.delete(route("items.destroy.permanently",this.edit.id),{onSuccess:()=>this.closeModal()})},closePermanentModal(){this.permanent=!1},deletePhoto(){this.$inertia.delete(route("items.deletePhoto",this.edit.id),{onSuccess:()=>{this.edit.photo=null,this.closeModal()}})}}},te={key:0,class:"flex items-center"},oe=["src"],re={class:"flex flex-col gap-6"},se={class:"flex flex-col lg:flex-row gap-6"},le={class:"flex flex-col gap-6 w-full lg:w-1/2"},ie={class:"flex flex-col gap-6 w-full lg:w-1/2"},ne={class:"flex items-end"},ae={key:0,class:"w-16 h-16 mr-4 relative group"},de=["src"],me={class:"flex-1"},ue={class:"-mt-4"},ce={class:"ml-6 text-sm text-yellow-600"},he={key:0,class:"my-6"},pe={class:"flex items-center justify-between"},fe={class:"text-lg font-bold"},ge={class:"flex flex-wrap items-start -mx-3"},ye={class:"p-4 bg-gray-100 shadow-sm rounded-md"},be={class:"flex items-start"},ke={class:"mt-6"},_e=["onClick"],we=["onClick"],ve={class:"flex flex-wrap items-start -mx-2"},Ve={class:"mt-6"},xe={class:"font-bold"},Ce={class:"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-6"},Te={class:"w-full flex items-center justify-between"},Ue={key:1},Ie={class:"flex items-center"};function Se(e,t,n,De,o,a){const U=m("Link"),I=m("trashed-message"),p=m("text-input"),w=m("auto-complete"),S=m("icons"),D=m("file-input"),P=m("textarea-input"),x=m("check-box"),A=m("tec-action-message"),q=m("loading-button"),M=m("tec-form-section"),v=m("Dialog"),N=m("admin-layout");return i(),V(N,{title:e.$t(n.edit?"edit_x":"create_x",{x:e.$t("Item")})},{default:c(()=>[l(M,{onSubmitted:a.update},{title:c(()=>{var h;return[n.edit?(i(),d("div",te,[l(U,{class:"text-blue-600 hover:text-blue-700",href:e.route("items.index")},{default:c(()=>[g(u(e.$t("Items")),1)]),_:1},8,["href"]),t[19]||(t[19]=s("span",{class:"text-blue-600 font-medium mx-2"},"/",-1)),(h=n.edit)!=null&&h.photo?(i(),d("img",{key:0,class:"block w-6 h-6 rounded-full mr-2",src:n.edit.photo},null,8,oe)):b("",!0),g(" "+u(n.edit.name),1)])):(i(),d(_,{key:1},[g(u(e.$t("create_x",{x:e.$t("Item")})),1)],64))]}),description:c(()=>[g(u(n.edit?e.$t("Update the record by modifying the details in the form below"):e.$t("Please fill the form below to add new record.")),1)]),form:c(()=>{var h;return[n.edit&&n.edit.deleted_at?(i(),V(I,{key:0,class:"mb-6",onRestore:a.restore},{default:c(()=>[g(u(e.$t("This record has been deleted.")),1)]),_:1},8,["onRestore"])):b("",!0),s("div",re,[s("div",se,[s("div",le,[l(p,{modelValue:o.form.name,"onUpdate:modelValue":t[0]||(t[0]=r=>o.form.name=r),error:e.$page.props.errors.name,label:e.$t("Name")},null,8,["modelValue","error","label"]),l(p,{modelValue:o.form.code,"onUpdate:modelValue":t[1]||(t[1]=r=>o.form.code=r),error:e.$page.props.errors.code,label:e.$t("Code")},null,8,["modelValue","error","label"]),l(w,{id:"symbology",modelValue:o.form.symbology,"onUpdate:modelValue":t[2]||(t[2]=r=>o.form.symbology=r),suggestions:o.symbologies,label:e.$t("Barcode Symbology"),error:e.$page.props.errors.symbology},null,8,["modelValue","suggestions","label","error"]),l(p,{modelValue:o.form.sku,"onUpdate:modelValue":t[3]||(t[3]=r=>o.form.sku=r),error:e.$page.props.errors.sku,label:e.$t("SKU")},null,8,["modelValue","error","label"])]),s("div",ie,[l(w,{id:"category",suggestions:a.parents,label:e.$t("Category"),modelValue:o.form.category_id,"onUpdate:modelValue":t[4]||(t[4]=r=>o.form.category_id=r),error:e.$page.props.errors.category_id},null,8,["suggestions","label","modelValue","error"]),l(T,{name:"slidedown"},{default:c(()=>[o.form.category_id&&a.subcategories.length>0?(i(),V(w,{key:0,id:"subcategory",suggestions:a.subcategories,label:e.$t("Child Category"),modelValue:o.form.child_category_id,"onUpdate:modelValue":t[5]||(t[5]=r=>o.form.child_category_id=r)},null,8,["suggestions","label","modelValue"])):b("",!0)]),_:1}),l(w,{id:"unit",label:e.$t("Unit"),suggestions:n.units,modelValue:o.form.unit_id,"onUpdate:modelValue":t[6]||(t[6]=r=>o.form.unit_id=r)},null,8,["label","suggestions","modelValue"]),l(p,{modelValue:o.form.rack_location,"onUpdate:modelValue":t[7]||(t[7]=r=>o.form.rack_location=r),error:e.$page.props.errors.rack_location,label:e.$t("Rack Location")},null,8,["modelValue","error","label"]),s("div",ne,[(h=n.edit)!=null&&h.photo?(i(),d("div",ae,[s("button",{type:"button",onClick:t[8]||(t[8]=()=>o.photo=!0),class:"hidden group-hover:flex items-center rounded-sm justify-center absolute inset-1 bg-gray-900/80"},[l(S,{name:"trash",class:"shrink-0 w-6 h-6 text-red-500"})]),s("img",{src:n.edit.photo,alt:"",class:"rounded-sm w-16 h-16"},null,8,de)])):b("",!0),s("div",me,[l(D,{modelValue:o.form.photo,"onUpdate:modelValue":t[9]||(t[9]=r=>o.form.photo=r),error:e.$page.props.errors.photo,label:e.$t("Photo")},null,8,["modelValue","error","label"])])])])]),l(P,{modelValue:o.form.details,"onUpdate:modelValue":t[10]||(t[10]=r=>o.form.details=r),error:e.$page.props.errors.details,label:e.$t("Details")},null,8,["modelValue","error","label"]),s("div",null,[l(x,{class:"mb-2",id:"track_weight",label:e.$t("Track Weight"),checked:o.form.track_weight,"onUpdate:checked":t[11]||(t[11]=r=>o.form.track_weight=r),error:e.$page.props.errors.track_weight},null,8,["label","checked","error"]),l(x,{id:"track_quantity",label:e.$t("Track Quantity"),checked:o.form.track_quantity,"onUpdate:checked":t[12]||(t[12]=r=>o.form.track_quantity=r),error:e.$page.props.errors.track_quantity},null,8,["label","checked","error"])]),l(T,{name:"slidedown"},{default:c(()=>[o.form.track_quantity?(i(),V(p,{key:0,class:"mb-6",type:"number",modelValue:o.form.alert_quantity,"onUpdate:modelValue":t[13]||(t[13]=r=>o.form.alert_quantity=r),label:e.$t("Alert on low stock of"),error:e.$page.props.errors.alert_quantity},null,8,["modelValue","label","error"])):b("",!0)]),_:1}),s("div",ue,[l(x,{id:"has_variants",checked:o.form.has_variants,"onUpdate:checked":t[14]||(t[14]=r=>o.form.has_variants=r),error:e.$page.props.errors.has_variants,label:e.$t("Track Variants e.g. Size and/or Color")},null,8,["checked","error","label"]),s("p",ce,u(e.$t("Modifying variants after you have stock could result in wrong stock.")),1),o.form.has_variants==1?(i(),d("div",he,[s("div",pe,[s("h3",fe,u(e.$t("Variants")),1),s("div",null,[s("button",{type:"button",onClick:t[15]||(t[15]=r=>o.form.variants.push({name:"",option:["",""]})),class:"text-gray-100 px-4 py-3 bg-blue-600 border border-blue-600 rounded-l-md ml-4 focus:outline-hidden hover:bg-blue-700"},t[20]||(t[20]=[s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"+",-1)])),s("button",{type:"button",onClick:t[16]||(t[16]=r=>o.form.variants.pop()),class:"text-gray-100 px-4 py-3 bg-blue-600 border border-blue-600 rounded-r-md focus:outline-hidden hover:bg-blue-700"},t[21]||(t[21]=[s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"-",-1)]))])]),s("div",ge,[(i(!0),d(_,null,C(o.form.variants,(r,f)=>(i(),d("div",{key:f,class:"mt-6 px-3 w-full lg:w-1/2"},[s("div",ye,[s("div",be,[l(p,{class:"flex-1",modelValue:r.name,"onUpdate:modelValue":y=>r.name=y,error:o.form.errors["variants."+f+".name"],label:e.$t("Variant")+" "+(f+1)+" "+e.$t("Name")},null,8,["modelValue","onUpdate:modelValue","error","label"]),s("span",ke,[s("button",{type:"button",onClick:y=>r.option.push(""),class:"mt-1 text-gray-100 px-4 py-3 bg-gray-600 border border-gray-600 rounded-l-md ml-4 focus:outline-hidden hover:bg-gray-500"},t[22]||(t[22]=[s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"+",-1)]),8,_e),s("button",{type:"button",onClick:y=>r.option.pop(),class:"mt-1 text-gray-100 px-4 py-3 bg-gray-600 border border-gray-600 rounded-r-md focus:outline-hidden hover:bg-gray-500"},t[23]||(t[23]=[s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"-",-1)]),8,we)])]),s("div",ve,[(i(!0),d(_,null,C(r.option,(y,k)=>(i(),d("div",{class:"mt-4 px-2 w-1/2",key:k},[l(p,{modelValue:r.option[k],"onUpdate:modelValue":E=>r.option[k]=E,label:e.$t("Option")+" "+(k+1),error:o.form.errors["variants."+f+".option."+k]},null,8,["modelValue","onUpdate:modelValue","label","error"])]))),128))])])]))),128))])])):b("",!0),s("div",Ve,[s("div",xe,u(e.$t("Warehouse Rack Locations")),1),s("div",Ce,[(i(!0),d(_,null,C(o.form.warehouses,(r,f)=>(i(),d("div",null,[l(p,{class:"flex-1",modelValue:o.form.warehouses[f].rack,"onUpdate:modelValue":y=>o.form.warehouses[f].rack=y,error:o.form.errors["warehouses."+f+".rack"],label:e.$t("Rack Location for {x}",{x:r.name})},null,8,["modelValue","onUpdate:modelValue","error","label"])]))),256))])])])])]}),actions:c(()=>[s("div",Te,[n.edit?(i(),d(_,{key:0},[n.edit.deleted_at?(i(),d("button",{key:1,type:"button",onClick:t[18]||(t[18]=(...h)=>a.deletePermanently&&a.deletePermanently(...h)),class:"text-red-600 px-4 py-2 rounded-sm border-2 border-transparent hover:border-gray-300 focus:outline-hidden focus:border-gray-300"},u(e.$t("delete_x",{x:e.$t("Permanently")})),1)):(i(),d("button",{key:0,type:"button",onClick:t[17]||(t[17]=(...h)=>a.destroy&&a.destroy(...h)),class:"text-red-600 px-4 py-2 rounded-sm border-2 border-transparent hover:border-gray-300 focus:outline-hidden focus:border-gray-300"},u(e.$t("delete_x",{x:e.$t("Item")})),1))],64)):(i(),d("div",Ue)),s("div",Ie,[l(A,{on:o.form.recentlySuccessful,class:"mx-3"},{default:c(()=>[g(u(e.$t("Saved.")),1)]),_:1},8,["on"]),l(q,{type:"submit",loading:o.form.processing,disabled:o.form.processing},{default:c(()=>[g(u(e.$t("Save")),1)]),_:1},8,["loading","disabled"])])])]),_:1},8,["onSubmitted"]),l(v,{"max-width":"md",show:o.photo,"action-type":"delete",action:a.deletePhoto,title:"Delete Item Photo?",close:()=>o.photo=!1,"action-text":"Delete Item Photo?",content:e.$t("Are you sure you want to delete the photo?")},null,8,["show","action","close","content"]),l(v,{"max-width":"md",show:o.permanent,"action-type":"delete",title:"Delete Item?",close:a.closePermanentModal,"action-text":"Delete Permanently",action:a.deleteCategoryPermanently,content:`<p class='mb-2'>${e.$t("Are you sure you want to delete the record permanently?")}</p>
        <p>${e.$t("Once deleted, all of its resources and data will be permanently deleted.")}</p>`},null,8,["show","close","action","content"]),l(v,{show:o.confirm,close:a.closeModal,action:a.deleteItem,"action-type":"delete",title:"Delete Item?","action-text":"Delete Item",content:e.$t("Are you sure you want to delete the record?")},null,8,["show","close","action","content"]),l(v,{show:o.restoreConf,action:a.restoreItem,title:"Restore Item!",close:a.closeRestoreModal,"action-text":"Restore Item",content:e.$t("Are you sure you want to restore the record?")},null,8,["show","action","close","content"])]),_:1},8,["title"])}const rt=$(ee,[["render",Se]]);export{rt as default};
