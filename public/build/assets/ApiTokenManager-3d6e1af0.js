import{T as j}from"./Input-b786da58.js";import{T as L}from"./Label-fda955a2.js";import{T as N}from"./Button-d4d49350.js";import{T as U}from"./Checkbox-36df9387.js";import{T as z}from"./InputError-8d3cfe49.js";import{T as E}from"./DialogModal-d32a0a51.js";import{T as W}from"./FormSection-07a3c25c.js";import{T as Y}from"./DangerButton-a5a78b3b.js";import{T as q}from"./ActionMessage-e7228db2.js";import{T as G}from"./ActionSection-4deeb4ab.js";import{T as H}from"./SectionBorder-4df2f48c.js";import{T as J}from"./SecondaryButton-7ef0b567.js";import{M as K}from"./Modal-291f355a.js";import{_ as F,r as l,o as c,d as O,e as o,a as s,f as T,c as a,g as i,b as _,h as r,F as h,i as v,t as k,n as b}from"./app-32ed258c.js";import"./SectionTitle-8b846035.js";const Q={emits:["close"],components:{Modal:K},props:{show:{default:!1},maxWidth:{default:"2xl"},closeable:{default:!0}},methods:{close(){this.$emit("close")}}},R={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},X={class:"sm:flex sm:items-start"},Z=s("div",{class:"mx-auto shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[s("svg",{class:"h-6 w-6 text-red-600",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),$={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},ee={class:"text-lg"},oe={class:"mt-2"},te={class:"px-6 py-4 bg-gray-100 text-right sm:rounded-b-lg"};function se(m,n,d,C,e,p){const g=l("modal");return c(),O(g,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:p.close},{default:o(()=>[s("div",R,[s("div",X,[Z,s("div",$,[s("h3",ee,[T(m.$slots,"title")]),s("div",oe,[T(m.$slots,"content")])])])]),s("div",te,[T(m.$slots,"footer")])]),_:3},8,["show","max-width","closeable","onClose"])}const ne=F(Q,[["render",se]]),ie={components:{TecInput:j,TecLabel:L,TecButton:N,TecCheckbox:U,TecInputError:z,TecDialogModal:E,TecFormSection:W,TecDangerButton:Y,TecActionMessage:q,TecActionSection:G,TecSectionBorder:H,TecSecondaryButton:J,TecConfirmationModal:ne},props:["tokens","availablePermissions","defaultPermissions"],data(){return{createApiTokenForm:this.$inertia.form({name:"",permissions:this.defaultPermissions}),updateApiTokenForm:this.$inertia.form({permissions:[]}),deleteApiTokenForm:this.$inertia.form(),displayingToken:!1,managingPermissionsFor:null,apiTokenBeingDeleted:null}},methods:{createApiToken(){this.createApiTokenForm.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{this.displayingToken=!0,this.createApiTokenForm.reset()}})},manageApiTokenPermissions(m){this.updateApiTokenForm.permissions=m.abilities,this.managingPermissionsFor=m},updateApiToken(){this.updateApiTokenForm.put(route("api-tokens.update",this.managingPermissionsFor),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.managingPermissionsFor=null})},confirmApiTokenDeletion(m){this.apiTokenBeingDeleted=m},deleteApiToken(){this.deleteApiTokenForm.delete(route("api-tokens.destroy",this.apiTokenBeingDeleted),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.apiTokenBeingDeleted=null})}}},re={class:"col-span-6 sm:col-span-4"},le={key:0,class:"col-span-6"},ce={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"flex items-center"},me={class:"ml-2 text-gray-600"},de={key:0},pe={class:"mt-10 sm:mt-0"},ue={class:"space-y-6"},_e={class:"flex items-center"},ke={key:0,class:"text-gray-400"},ge=["onClick"],fe=["onClick"],Te=s("div",null,"Please copy your new API token. For your security, it won't be shown again.",-1),he={key:0,class:"mt-4 bg-gray-100 px-4 py-2 rounded font-mono text-gray-500"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},be={class:"flex items-center"},ye={class:"ml-2 text-gray-600"};function Ae(m,n,d,C,e,p){const g=l("tec-label"),P=l("tec-input"),w=l("tec-input-error"),y=l("tec-checkbox"),S=l("tec-action-message"),A=l("tec-button"),B=l("tec-form-section"),D=l("tec-section-border"),I=l("tec-action-section"),f=l("tec-secondary-button"),x=l("tec-dialog-modal"),M=l("tec-danger-button"),V=l("tec-confirmation-modal");return c(),a("div",null,[i(B,{onSubmitted:p.createApiToken},{title:o(()=>[r(" Create API Token ")]),description:o(()=>[r(" API tokens allow third-party services to authenticate with our application on your behalf. ")]),form:o(()=>[s("div",re,[i(g,{for:"name",value:"Name"}),i(P,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:e.createApiTokenForm.name,"onUpdate:modelValue":n[0]||(n[0]=t=>e.createApiTokenForm.name=t),autofocus:""},null,8,["modelValue"]),i(w,{message:e.createApiTokenForm.errors.name,class:"mt-2"},null,8,["message"])]),d.availablePermissions.length>0?(c(),a("div",le,[i(g,{for:"permissions",value:"Permissions"}),s("div",ce,[(c(!0),a(h,null,v(d.availablePermissions,t=>(c(),a("div",{key:t},[s("label",ae,[i(y,{value:t,checked:e.createApiTokenForm.permissions,"onUpdate:checked":n[1]||(n[1]=u=>e.createApiTokenForm.permissions=u)},null,8,["value","checked"]),s("span",me,k(t),1)])]))),128))])])):_("",!0)]),actions:o(()=>[i(S,{on:e.createApiTokenForm.recentlySuccessful,class:"mr-3"},{default:o(()=>[r(" Created. ")]),_:1},8,["on"]),i(A,{class:b({"opacity-25":e.createApiTokenForm.processing}),disabled:e.createApiTokenForm.processing},{default:o(()=>[r(" Create ")]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"]),d.tokens.length>0?(c(),a("div",de,[i(D),s("div",pe,[i(I,null,{title:o(()=>[r(" Manage API Tokens ")]),description:o(()=>[r(" You may delete any of your existing tokens if they are no longer needed. ")]),content:o(()=>[s("div",ue,[(c(!0),a(h,null,v(d.tokens,t=>(c(),a("div",{class:"flex items-center justify-between",key:t.id},[s("div",null,k(t.name),1),s("div",_e,[t.last_used_ago?(c(),a("div",ke,"Last used "+k(t.last_used_ago),1)):_("",!0),d.availablePermissions.length>0?(c(),a("button",{key:1,class:"cursor-pointer ml-6 text-gray-400 underline",onClick:u=>p.manageApiTokenPermissions(t)}," Permissions ",8,ge)):_("",!0),s("button",{class:"cursor-pointer ml-6 text-red-500",onClick:u=>p.confirmApiTokenDeletion(t)},"Delete",8,fe)])]))),128))])]),_:1})])])):_("",!0),i(x,{show:e.displayingToken,onClose:n[3]||(n[3]=t=>e.displayingToken=!1)},{title:o(()=>[r(" API Token ")]),content:o(()=>[Te,m.$page.props.jetstream.flash.token?(c(),a("div",he,k(m.$page.props.jetstream.flash.token),1)):_("",!0)]),footer:o(()=>[i(f,{onClick:n[2]||(n[2]=t=>e.displayingToken=!1)},{default:o(()=>[r(" Close ")]),_:1})]),_:1},8,["show"]),i(x,{show:e.managingPermissionsFor,onClose:n[6]||(n[6]=t=>e.managingPermissionsFor=null)},{title:o(()=>[r(" API Token Permissions ")]),content:o(()=>[s("div",ve,[(c(!0),a(h,null,v(d.availablePermissions,t=>(c(),a("div",{key:t},[s("label",be,[i(y,{value:t,checked:e.updateApiTokenForm.permissions,"onUpdate:checked":n[4]||(n[4]=u=>e.updateApiTokenForm.permissions=u)},null,8,["value","checked"]),s("span",ye,k(t),1)])]))),128))])]),footer:o(()=>[i(f,{onClick:n[5]||(n[5]=t=>e.managingPermissionsFor=null)},{default:o(()=>[r(" Cancel ")]),_:1}),i(A,{class:b(["ml-2",{"opacity-25":e.updateApiTokenForm.processing}]),onClick:p.updateApiToken,disabled:e.updateApiTokenForm.processing},{default:o(()=>[r(" Save ")]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"]),i(V,{show:e.apiTokenBeingDeleted,onClose:n[8]||(n[8]=t=>e.apiTokenBeingDeleted=null)},{title:o(()=>[r(" Delete API Token ")]),content:o(()=>[r(" Are you sure you would like to delete this API token? ")]),footer:o(()=>[i(f,{onClick:n[7]||(n[7]=t=>e.apiTokenBeingDeleted=null)},{default:o(()=>[r(" Cancel ")]),_:1}),i(M,{class:b(["ml-2",{"opacity-25":e.deleteApiTokenForm.processing}]),onClick:p.deleteApiToken,disabled:e.deleteApiTokenForm.processing},{default:o(()=>[r(" Delete ")]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"])])}const ze=F(ie,[["render",Ae]]);export{ze as default};
