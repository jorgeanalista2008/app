import{D as B}from"./Dialog-73ba9e33.js";import{C as j}from"./CheckBox-4666b4b0.js";import{F as L}from"./FileInput-f094e2ab.js";import{T as R}from"./TextInput-df42c091.js";import{S as F}from"./SelectInput-e6e66a62.js";import{A as O}from"./AdminLayout-e87dd638.js";import{A as z}from"./AutoComplete-db11f07b.js";import{L as K}from"./LoadingButton-1a262643.js";import{T as Q}from"./TextareaInput-4c56eb86.js";import{T as W}from"./DialogModal-d32a0a51.js";import{T as G}from"./TrashedMessage-f5197437.js";import{T as H}from"./FormSection-07a3c25c.js";import{T as J}from"./DangerButton-a5a78b3b.js";import{T as X}from"./SectionTitle-8b846035.js";import{T as Y}from"./ActionMessage-e7228db2.js";import{T as Z}from"./SecondaryButton-7ef0b567.js";import{_ as $,r as d,o as i,d as w,e as u,g as l,c as m,h as f,t as c,b as g,F as V,a as s,T as C,i as T}from"./app-32ed258c.js";import"./Checkbox-36df9387.js";import"./InputError-8d3cfe49.js";import"./v4-4a60fe23.js";import"./Label-fda955a2.js";import"./Input-b786da58.js";import"./Modal-291f355a.js";import"./DropdownLink-b7a93580.js";import"./ApplicationLogo-67ce1691.js";import"./ApplicationMark-984b256c.js";import"./throttle-50742131.js";const ee={props:["edit","categories","units"],components:{Dialog:B,CheckBox:j,FileInput:L,TextInput:R,AdminLayout:O,SelectInput:F,AutoComplete:z,LoadingButton:K,TextareaInput:Q,TecDialogModal:W,TecFormSection:H,TecDangerButton:J,TrashedMessage:G,TecSectionTitle:X,TecActionMessage:Y,TecSecondaryButton:Z},data(){var e,o;return{photo:!1,confirm:!1,permanent:!1,restoreConf:!1,symbologies:[{value:"CODE128",label:this.$t("CODE128")},{value:"CODE39",label:this.$t("CODE39")},{value:"EAN5",label:this.$t("EAN-5")},{value:"EAN8",label:this.$t("EAN-8")},{value:"EAN13",label:this.$t("EAN-13")},{value:"UPC",label:this.$t("UPC-A")}],form:this.$inertia.form({photo:null,_method:this.edit?"put":"post",sku:this.edit?this.edit.sku:null,name:this.edit?this.edit.name:null,code:this.edit?this.edit.code:null,stock:this.edit?this.edit.stock:null,details:this.edit?this.edit.details:null,unit_id:this.edit?this.edit.unit_id:null,set_stock:this.edit?this.edit.set_stock:null,symbology:this.edit?this.edit.symbology:"code128",rack_location:this.edit?this.edit.rack_location:null,has_serials:this.edit?this.edit.has_serials==1:null,category_id:this.edit?(e=this.edit.categories[0])==null?void 0:e.id:null,has_variants:this.edit?this.edit.has_variants==1:null,track_weight:this.edit?this.edit.track_weight==1:null,track_quantity:this.edit?this.edit.track_quantity==1:!0,child_category_id:this.edit?(o=this.edit.categories[1])==null?void 0:o.id:null,alert_quantity:this.edit&&this.edit.alert_quantity?Number(this.edit.alert_quantity):null,variants:this.edit&&this.edit.variants?this.edit.variants:[{name:"",option:["",""]}]})}},computed:{parents(){return this.categories.filter(e=>!e.parent_id)},subcategories(){return this.categories.filter(e=>e.parent_id==this.form.category_id)}},methods:{update(e){this.form.post(this.edit?this.route("items.update",this.edit.id):this.route("items.store"),{preserveScroll:!0})},destroy(){this.confirm=!0},deleteItem(){this.$inertia.delete(route("items.destroy",this.edit.id),{onSuccess:()=>this.closeModal()})},closeModal(){this.confirm=!1},restore(){this.restoreConf=!0},restoreItem(){this.$inertia.put(this.route("items.restore",this.edit.id),{onSuccess:()=>this.restoreConf=!1})},closeRestoreModal(){this.restoreConf=!1},deletePermanently(){this.permanent=!0},deleteCategoryPermanently(){this.$inertia.delete(route("items.destroy.permanently",this.edit.id),{onSuccess:()=>this.closeModal()})},closePermanentModal(){this.permanent=!1},deletePhoto(){this.$inertia.delete(route("items.deletePhoto",this.edit.id),{onSuccess:()=>{this.edit.photo=null,this.closeModal()}})}}},te={key:0,class:"flex items-center"},oe=s("span",{class:"text-blue-600 font-medium mx-2"},"/",-1),re=["src"],se={class:"flex flex-col gap-6"},le={class:"flex flex-col lg:flex-row gap-6"},ie={class:"flex flex-col gap-6 w-full lg:w-1/2"},ne={class:"flex flex-col gap-6 w-full lg:w-1/2"},ae={class:"flex items-end"},de={key:0,class:"w-16 h-16 mr-4 relative group"},me=["src"],ue={class:"flex-1"},ce={class:"-mt-4"},pe={class:"ml-6 text-sm text-yellow-600"},he={key:0,class:"my-6"},fe={class:"flex items-center justify-between"},ge={class:"text-lg font-bold"},ye=s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"+",-1),be=[ye],_e=s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"-",-1),ke=[_e],ve={class:"flex flex-wrap items-start -mx-3"},we={class:"p-4 bg-gray-100 shadow rounded-md"},Ve={class:"flex items-start"},xe={class:"mt-6"},Ce=["onClick"],Te=s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"+",-1),Ue=[Te],Ie=["onClick"],Se=s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"-",-1),De=[Se],Pe={class:"flex flex-wrap items-start -mx-2"},Ae={class:"w-full flex items-center justify-between"},qe={key:1},Me={class:"flex items-center"};function Ne(e,o,a,Ee,t,n){const U=d("Link"),I=d("trashed-message"),h=d("text-input"),b=d("auto-complete"),S=d("icons"),D=d("file-input"),P=d("textarea-input"),x=d("check-box"),A=d("tec-action-message"),q=d("loading-button"),M=d("tec-form-section"),_=d("Dialog"),N=d("admin-layout");return i(),w(N,{title:e.$t(a.edit?"edit_x":"create_x",{x:e.$t("Item")})},{default:u(()=>[l(M,{onSubmitted:n.update},{title:u(()=>{var p;return[a.edit?(i(),m("div",te,[l(U,{class:"text-blue-600 hover:text-blue-700",href:e.route("items.index")},{default:u(()=>[f(c(e.$t("Items")),1)]),_:1},8,["href"]),oe,(p=a.edit)!=null&&p.photo?(i(),m("img",{key:0,class:"block w-6 h-6 rounded-full mr-2",src:a.edit.photo},null,8,re)):g("",!0),f(" "+c(a.edit.name),1)])):(i(),m(V,{key:1},[f(c(e.$t("create_x",{x:e.$t("Item")})),1)],64))]}),description:u(()=>[f(c(a.edit?e.$t("Update the record by modifying the details in the form below"):e.$t("Please fill the form below to add new record.")),1)]),form:u(()=>{var p;return[a.edit&&a.edit.deleted_at?(i(),w(I,{key:0,class:"mb-6",onRestore:n.restore},{default:u(()=>[f(c(e.$t("This record has been deleted.")),1)]),_:1},8,["onRestore"])):g("",!0),s("div",se,[s("div",le,[s("div",ie,[l(h,{modelValue:t.form.name,"onUpdate:modelValue":o[0]||(o[0]=r=>t.form.name=r),error:e.$page.props.errors.name,label:e.$t("Name")},null,8,["modelValue","error","label"]),l(h,{modelValue:t.form.code,"onUpdate:modelValue":o[1]||(o[1]=r=>t.form.code=r),error:e.$page.props.errors.code,label:e.$t("Code")},null,8,["modelValue","error","label"]),l(b,{id:"symbology",modelValue:t.form.symbology,"onUpdate:modelValue":o[2]||(o[2]=r=>t.form.symbology=r),suggestions:t.symbologies,label:e.$t("Barcode Symbology"),error:e.$page.props.errors.symbology},null,8,["modelValue","suggestions","label","error"]),l(h,{modelValue:t.form.sku,"onUpdate:modelValue":o[3]||(o[3]=r=>t.form.sku=r),error:e.$page.props.errors.sku,label:e.$t("SKU")},null,8,["modelValue","error","label"])]),s("div",ne,[l(b,{id:"category",suggestions:n.parents,label:e.$t("Category"),modelValue:t.form.category_id,"onUpdate:modelValue":o[4]||(o[4]=r=>t.form.category_id=r),error:e.$page.props.errors.category_id},null,8,["suggestions","label","modelValue","error"]),l(C,{name:"slidedown"},{default:u(()=>[t.form.category_id&&n.subcategories.length>0?(i(),w(b,{key:0,id:"subcategory",suggestions:n.subcategories,label:e.$t("Child Category"),modelValue:t.form.child_category_id,"onUpdate:modelValue":o[5]||(o[5]=r=>t.form.child_category_id=r)},null,8,["suggestions","label","modelValue"])):g("",!0)]),_:1}),l(b,{id:"unit",label:e.$t("Unit"),suggestions:a.units,modelValue:t.form.unit_id,"onUpdate:modelValue":o[6]||(o[6]=r=>t.form.unit_id=r)},null,8,["label","suggestions","modelValue"]),l(h,{modelValue:t.form.rack_location,"onUpdate:modelValue":o[7]||(o[7]=r=>t.form.rack_location=r),error:e.$page.props.errors.rack_location,label:e.$t("Rack Location")},null,8,["modelValue","error","label"]),s("div",ae,[(p=a.edit)!=null&&p.photo?(i(),m("div",de,[s("button",{type:"button",onClick:o[8]||(o[8]=()=>t.photo=!0),class:"hidden group-hover:flex items-center rounded justify-center absolute inset-1 bg-gray-900/80"},[l(S,{name:"trash",class:"shrink-0 w-6 h-6 text-red-500"})]),s("img",{src:a.edit.photo,alt:"",class:"rounded w-16 h-16"},null,8,me)])):g("",!0),s("div",ue,[l(D,{modelValue:t.form.photo,"onUpdate:modelValue":o[9]||(o[9]=r=>t.form.photo=r),error:e.$page.props.errors.photo,label:e.$t("Photo")},null,8,["modelValue","error","label"])])])])]),l(P,{modelValue:t.form.details,"onUpdate:modelValue":o[10]||(o[10]=r=>t.form.details=r),error:e.$page.props.errors.details,label:e.$t("Details")},null,8,["modelValue","error","label"]),s("div",null,[l(x,{class:"mb-2",id:"track_weight",label:e.$t("Track Weight"),checked:t.form.track_weight,"onUpdate:checked":o[11]||(o[11]=r=>t.form.track_weight=r),error:e.$page.props.errors.track_weight},null,8,["label","checked","error"]),l(x,{id:"track_quantity",label:e.$t("Track Quantity"),checked:t.form.track_quantity,"onUpdate:checked":o[12]||(o[12]=r=>t.form.track_quantity=r),error:e.$page.props.errors.track_quantity},null,8,["label","checked","error"])]),l(C,{name:"slidedown"},{default:u(()=>[t.form.track_quantity?(i(),w(h,{key:0,class:"mb-6",type:"number",modelValue:t.form.alert_quantity,"onUpdate:modelValue":o[13]||(o[13]=r=>t.form.alert_quantity=r),label:e.$t("Alert on low stock of"),error:e.$page.props.errors.alert_quantity},null,8,["modelValue","label","error"])):g("",!0)]),_:1}),s("div",ce,[l(x,{id:"has_variants",checked:t.form.has_variants,"onUpdate:checked":o[14]||(o[14]=r=>t.form.has_variants=r),error:e.$page.props.errors.has_variants,label:e.$t("Track Variants e.g. Size and/or Color")},null,8,["checked","error","label"]),s("p",pe,c(e.$t("Modifying variants after you have stock could result in wrong stock.")),1),t.form.has_variants==1?(i(),m("div",he,[s("div",fe,[s("h3",ge,c(e.$t("Variants")),1),s("div",null,[s("button",{type:"button",onClick:o[15]||(o[15]=r=>t.form.variants.push({name:"",option:["",""]})),class:"text-gray-100 px-4 py-3 bg-blue-600 border border-blue-600 rounded-l-md ml-4 focus:outline-none hover:bg-blue-700"},be),s("button",{type:"button",onClick:o[16]||(o[16]=r=>t.form.variants.pop()),class:"text-gray-100 px-4 py-3 bg-blue-600 border border-blue-600 rounded-r-md focus:outline-none hover:bg-blue-700"},ke)])]),s("div",ve,[(i(!0),m(V,null,T(t.form.variants,(r,k)=>(i(),m("div",{key:k,class:"mt-6 px-3 w-full lg:w-1/2"},[s("div",we,[s("div",Ve,[l(h,{class:"flex-1",modelValue:r.name,"onUpdate:modelValue":v=>r.name=v,error:t.form.errors["variants."+k+".name"],label:e.$t("Variant")+" "+(k+1)+" "+e.$t("Name")},null,8,["modelValue","onUpdate:modelValue","error","label"]),s("span",xe,[s("button",{type:"button",onClick:v=>r.option.push(""),class:"mt-1 text-gray-100 px-4 py-3 bg-gray-600 border border-gray-600 rounded-l-md ml-4 focus:outline-none hover:bg-gray-500"},Ue,8,Ce),s("button",{type:"button",onClick:v=>r.option.pop(),class:"mt-1 text-gray-100 px-4 py-3 bg-gray-600 border border-gray-600 rounded-r-md focus:outline-none hover:bg-gray-500"},De,8,Ie)])]),s("div",Pe,[(i(!0),m(V,null,T(r.option,(v,y)=>(i(),m("div",{class:"mt-4 px-2 w-1/2",key:y},[l(h,{modelValue:r.option[y],"onUpdate:modelValue":E=>r.option[y]=E,label:e.$t("Option")+" "+(y+1),error:t.form.errors["variants."+k+".option."+y]},null,8,["modelValue","onUpdate:modelValue","label","error"])]))),128))])])]))),128))])])):g("",!0)])])]}),actions:u(()=>[s("div",Ae,[a.edit?(i(),m(V,{key:0},[a.edit.deleted_at?(i(),m("button",{key:1,type:"button",onClick:o[18]||(o[18]=(...p)=>n.deletePermanently&&n.deletePermanently(...p)),class:"text-red-600 px-4 py-2 rounded border-2 border-transparent hover:border-gray-300 focus:outline-none focus:border-gray-300"},c(e.$t("delete_x",{x:e.$t("Permanently")})),1)):(i(),m("button",{key:0,type:"button",onClick:o[17]||(o[17]=(...p)=>n.destroy&&n.destroy(...p)),class:"text-red-600 px-4 py-2 rounded border-2 border-transparent hover:border-gray-300 focus:outline-none focus:border-gray-300"},c(e.$t("delete_x",{x:e.$t("Item")})),1))],64)):(i(),m("div",qe)),s("div",Me,[l(A,{on:t.form.recentlySuccessful,class:"mx-3"},{default:u(()=>[f(c(e.$t("Saved.")),1)]),_:1},8,["on"]),l(q,{type:"submit",loading:t.form.processing,disabled:t.form.processing},{default:u(()=>[f(c(e.$t("Save")),1)]),_:1},8,["loading","disabled"])])])]),_:1},8,["onSubmitted"]),l(_,{"max-width":"md",show:t.photo,"action-type":"delete",action:n.deletePhoto,title:"Delete Item Photo?",close:()=>t.photo=!1,"action-text":"Delete Item Photo?",content:e.$t("Are you sure you want to delete the photo?")},null,8,["show","action","close","content"]),l(_,{"max-width":"md",show:t.permanent,"action-type":"delete",title:"Delete Item?",close:n.closePermanentModal,"action-text":"Delete Permanently",action:n.deleteCategoryPermanently,content:`<p class='mb-2'>${e.$t("Are you sure you want to delete the record permanently?")}</p>
        <p>${e.$t("Once deleted, all of its resources and data will be permanently deleted.")}</p>`},null,8,["show","close","action","content"]),l(_,{show:t.confirm,close:n.closeModal,action:n.deleteItem,"action-type":"delete",title:"Delete Item?","action-text":"Delete Item",content:e.$t("Are you sure you want to delete the record?")},null,8,["show","close","action","content"]),l(_,{show:t.restoreConf,action:n.restoreItem,title:"Restore Item!",close:n.closeRestoreModal,"action-text":"Restore Item",content:e.$t("Are you sure you want to restore the record?")},null,8,["show","action","close","content"])]),_:1},8,["title"])}const mt=$(ee,[["render",Ne]]);export{mt as default};
